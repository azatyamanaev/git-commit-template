plugins {
    id 'java'  // Убедитесь, что используете Java
    id 'org.jetbrains.intellij' version '1.8.0'  // Подберите версию плагина IntelliJ
}

repositories {
    mavenCentral()  // Основное Maven-хранилище для зависимостей
}

dependencies {
    implementation 'org.jetbrains:annotations:24.0.0'  // Часто используемая зависимость
}

intellij {
    version '2023.2'  // Укажите точную версию IntelliJ IDEA
    plugins = []  // Здесь вы можете указать плагины, необходимые вашему плагину
    updateSinceUntilBuild = false  // По желанию, определяет совместимость с другими версиями
}

tasks {
    compileJava {
        sourceCompatibility = '11'  // Установите версию JDK, которую вы используете
        targetCompatibility = '11'
    }

    patchPluginXml {
        sinceBuild = '223'  // Минимальная поддерживаемая версия IntelliJ IDEA
        untilBuild = '231.*'  // Максимальная поддерживаемая версия
    }

    runIde {
        maxHeapSize = '1g'  // Опционально, ограничение по памяти для IDE при запуске
    }

    buildPlugin {
        destinationDir = file("$buildDir/distributions")  // Куда сохранять готовые плагины
    }
}